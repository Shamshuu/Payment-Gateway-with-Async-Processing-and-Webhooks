!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PaymentGateway=t():e.PaymentGateway=t()}(this,()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.d(t,{default:()=>r});var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.iframeId="payment-gateway-iframe-"+Math.random().toString(36).substr(2,9),this.modalId="payment-gateway-modal-"+Math.random().toString(36).substr(2,9),this.handleMessage=this.handleMessage.bind(this),this.close=this.close.bind(this)},(t=[{key:"open",value:function(){if(this.options.key&&this.options.orderId){var e=document.createElement("div");e.id=this.modalId,e.className="pg-modal-overlay",e.setAttribute("data-test-id","payment-modal");var t=document.createElement("style");t.innerHTML="\n        .pg-modal-overlay {\n            position: fixed;\n            top: 0; left: 0;\n            width: 100%; height: 100%;\n            background-color: rgba(0, 0, 0, 0.6);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 9999;\n        }\n        .pg-modal-content {\n            background: white;\n            padding: 0;\n            border-radius: 8px;\n            width: 100%;\n            max-width: 450px;\n            height: 600px;\n            position: relative;\n            box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .pg-close-btn {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            background: transparent;\n            border: none;\n            font-size: 24px;\n            cursor: pointer;\n            color: #666;\n            z-index: 10001;\n        }\n        .pg-iframe {\n            width: 100%;\n            height: 100%;\n            border: none;\n        }\n    ",document.head.appendChild(t);var n=document.createElement("div");n.className="pg-modal-content";var o=document.createElement("button");o.className="pg-close-btn",o.innerHTML="&times;",o.setAttribute("data-test-id","close-modal-button"),o.onclick=this.close,n.appendChild(o);var i=document.createElement("iframe");i.id=this.iframeId,i.className="pg-iframe",i.setAttribute("data-test-id","payment-iframe"),i.src="".concat("http://localhost:3001","/checkout?order_id=").concat(this.options.orderId,"&embedded=true&key=").concat(this.options.key),n.appendChild(i),e.appendChild(n),document.body.appendChild(e),window.addEventListener("message",this.handleMessage)}else console.error("PaymentGateway: Missing required options 'key' or 'orderId'")}},{key:"handleMessage",value:function(e){var t=this,n=e.data,o=n.type,i=n.data;"payment_success"===o?(this.options.onSuccess&&this.options.onSuccess(i),setTimeout(function(){return t.close()},2e3)):"payment_failed"===o?this.options.onFailure&&this.options.onFailure(i):"close_modal"===o&&this.close()}},{key:"close",value:function(){var e=document.getElementById(this.modalId);e&&e.remove(),window.removeEventListener("message",this.handleMessage),this.options.onClose&&this.options.onClose()}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.PaymentGateway=a;const r=a;return t.default})());